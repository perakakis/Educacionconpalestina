<!DOCTYPE html>
<html lang="es">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Solidaridad con Palestina - Compromiso de Acción</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Georgia', serif;
            line-height: 1.6;
            color: #333;
            background: linear-gradient(135deg, #009639 0%, #FFFFFF 50%, #CE1126 100%);
            min-height: 100vh;
        }

        .container {
            max-width: 1000px;
            margin: 0 auto;
            padding: 20px;
        }

        .header {
            background: rgba(255, 255, 255, 0.95);
            padding: 40px;
            border-radius: 15px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.15);
            margin-bottom: 30px;
            text-align: center;
            border: 3px solid #009639;
        }

        h1 {
            color: #CE1126;
            font-size: 2.8em;
            margin-bottom: 15px;
            font-weight: bold;
        }

        .subtitle {
            color: #009639;
            font-size: 1.3em;
            margin-bottom: 20px;
            font-weight: bold;
        }

        .intro-text {
            color: #333;
            font-size: 1.1em;
            text-align: left;
            background: #f8f9fa;
            padding: 25px;
            border-radius: 10px;
            border-left: 5px solid #009639;
            margin: 20px 0;
        }

        .actions-section {
            background: rgba(255, 255, 255, 0.95);
            padding: 40px;
            border-radius: 15px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.15);
            margin-bottom: 30px;
            border: 2px solid #009639;
        }

        .actions-section h2 {
            color: #CE1126;
            margin-bottom: 25px;
            font-size: 1.8em;
            border-bottom: 3px solid #009639;
            padding-bottom: 10px;
        }

        .commitment-list {
            list-style: none;
            margin-bottom: 30px;
        }

        .commitment-list li {
            padding: 15px 0;
            border-bottom: 1px solid #ecf0f1;
            position: relative;
            padding-left: 30px;
        }

        .commitment-list li:before {
            content: "✊";
            position: absolute;
            left: 0;
            color: #CE1126;
            font-weight: bold;
            font-size: 1.2em;
        }

        .form-section {
            background: rgba(255, 255, 255, 0.95);
            padding: 40px;
            border-radius: 15px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.15);
            margin-bottom: 30px;
            border: 2px solid #009639;
        }

        .form-section h2 {
            color: #CE1126;
            margin-bottom: 25px;
            font-size: 1.8em;
        }

        .form-group {
            margin-bottom: 20px;
        }

        label {
            display: block;
            margin-bottom: 8px;
            color: #009639;
            font-weight: bold;
        }

        input[type="text"],
        input[type="email"],
        textarea {
            width: 100%;
            padding: 12px;
            border: 2px solid #009639;
            border-radius: 8px;
            font-size: 16px;
            transition: border-color 0.3s ease;
        }

        input[type="text"]:focus,
        input[type="email"]:focus,
        textarea:focus {
            outline: none;
            border-color: #CE1126;
            box-shadow: 0 0 0 3px rgba(206, 17, 38, 0.1);
        }

        textarea {
            resize: vertical;
            height: 100px;
        }

        .checkbox-group {
            margin: 20px 0;
        }

        .checkbox-item {
            display: flex;
            align-items: flex-start;
            margin-bottom: 15px;
            padding: 15px;
            background: #f8fff8;
            border-radius: 8px;
            border-left: 4px solid #009639;
        }

        .checkbox-item input[type="checkbox"] {
            margin-right: 12px;
            margin-top: 4px;
            transform: scale(1.3);
            accent-color: #CE1126;
        }

        .submit-btn {
            background: linear-gradient(135deg, #009639, #CE1126);
            color: white;
            padding: 15px 40px;
            border: none;
            border-radius: 50px;
            font-size: 18px;
            cursor: pointer;
            transition: transform 0.3s ease, box-shadow 0.3s ease;
            display: block;
            margin: 0 auto;
            font-weight: bold;
        }

        .submit-btn:hover {
            transform: translateY(-3px);
            box-shadow: 0 10px 25px rgba(206, 17, 38, 0.4);
        }

        .submit-btn:disabled {
            opacity: 0.7;
            cursor: not-allowed;
            transform: none;
        }

        .signatories-section {
            background: rgba(255, 255, 255, 0.95);
            padding: 40px;
            border-radius: 15px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.15);
            border: 2px solid #009639;
        }

        .signatories-section h2 {
            color: #CE1126;
            margin-bottom: 25px;
            font-size: 1.8em;
            border-bottom: 3px solid #009639;
            padding-bottom: 10px;
        }

        .signatory {
            background: #f8fff8;
            padding: 20px;
            margin-bottom: 15px;
            border-radius: 10px;
            border-left: 5px solid #009639;
        }

        .signatory-name {
            font-weight: bold;
            color: #CE1126;
            font-size: 1.1em;
        }

        .signatory-affiliation {
            color: #009639;
            margin: 5px 0;
            font-weight: 600;
        }

        .signatory-commitments {
            margin-top: 10px;
            font-size: 0.9em;
            color: #555;
        }

        .signatory-date {
            text-align: right;
            color: #777;
            font-size: 0.8em;
            margin-top: 10px;
        }

        .no-signatories {
            text-align: center;
            color: #009639;
            font-style: italic;
            padding: 40px;
            font-size: 1.1em;
        }

        .palestine-flag {
            display: inline-block;
            width: 30px;
            height: 20px;
            background: linear-gradient(to bottom, #000 33%, #fff 33%, #fff 66%, #009639 66%);
            position: relative;
            margin-right: 10px;
            vertical-align: middle;
        }

        .palestine-flag:before {
            content: '';
            position: absolute;
            left: 0;
            top: 0;
            width: 0;
            height: 0;
            border-style: solid;
            border-width: 10px 0 10px 15px;
            border-color: transparent transparent transparent #CE1126;
        }

        @media (max-width: 768px) {
            .container {
                padding: 10px;
            }

            h1 {
                font-size: 2.2em;
            }

            .header,
            .actions-section,
            .form-section,
            .signatories-section {
                padding: 25px;
            }
        }
    </style>
</head>

<body>
    <div class="container">
        <div class="header">
            <h1><span class="palestine-flag"></span>Solidaridad con Palestina</h1>
            <p class="subtitle">Compromiso de Acción</p>
            <div class="intro-text">
                <p>Lorem ipsum dolor sit amet, consectetur adipiscing elit. Sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat.</p>
                <br>
                <p>Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum. Sed ut perspiciatis unde omnis iste natus error.</p>
            </div>
        </div>

        <div class="actions-section">
            <h2>Acciones Disponibles</h2>
            <ul class="commitment-list">
                <li>Acción 1: Lorem ipsum dolor sit amet consectetur adipiscing elit</li>
                <li>Acción 2: Sed do eiusmod tempor incididunt ut labore et dolore magna aliqua</li>
                <li>Acción 3: Ut enim ad minim veniam quis nostrud exercitation ullamco</li>
                <li>Acción 4: Duis aute irure dolor in reprehenderit in voluptate velit esse</li>
                <li>Acción 5: Excepteur sint occaecat cupidatat non proident sunt in culpa</li>
                <li>Acción 6: At vero eos et accusamus et iusto odio dignissimos ducimus</li>
                <li>Acción 7: Et harum quidem rerum facilis est et expedita distinctio</li>
                <li>Acción 8: Temporibus autem quibusdam et aut officiis debitis aut rerum</li>
                <li>Acción 9: Itaque earum rerum hic tenetur a sapiente delectus ut aut</li>
                <li>Acción 10: Nam libero tempore cum soluta nobis est eligendi optio</li>
            </ul>
        </div>

        <div class="form-section">
            <h2>Firma Tu Compromiso</h2>
            <form id="commitmentForm" action="GOOGLE_SCRIPT_URL_HERE" method="POST">
                <div class="form-group">
                    <input name="bot-field" style="display: none;">
                </div>

                <div class="form-group">
                    <label for="name">Nombre Completo *</label>
                    <input type="text" id="name" name="name" required>
                </div>

                <div class="form-group">
                    <label for="email">Correo Electrónico *</label>
                    <input type="email" id="email" name="email" required>
                </div>

                <div class="form-group">
                    <label for="affiliation">Organización/Institución *</label>
                    <input type="text" id="affiliation" name="affiliation" required placeholder="Tu organización o institución">
                </div>

                <div class="form-group">
                    <label for="department">Departamento/Área (opcional)</label>
                    <input type="text" id="department" name="department" placeholder="Tu departamento o área de trabajo">
                </div>

                <div class="checkbox-group">
                    <p><strong>Selecciona las acciones que te comprometes a realizar:</strong></p>
                    <div class="checkbox-item">
                        <input type="checkbox" id="commitment1" name="commitment1" value="Acción 1">
                        <label for="commitment1">Acción 1: Lorem ipsum dolor sit amet consectetur</label>
                    </div>
                    <div class="checkbox-item">
                        <input type="checkbox" id="commitment2" name="commitment2" value="Acción 2">
                        <label for="commitment2">Acción 2: Sed do eiusmod tempor incididunt ut labore</label>
                    </div>
                    <div class="checkbox-item">
                        <input type="checkbox" id="commitment3" name="commitment3" value="Acción 3">
                        <label for="commitment3">Acción 3: Ut enim ad minim veniam quis nostrud</label>
                    </div>
                    <div class="checkbox-item">
                        <input type="checkbox" id="commitment4" name="commitment4" value="Acción 4">
                        <label for="commitment4">Acción 4: Duis aute irure dolor in reprehenderit</label>
                    </div>
                    <div class="checkbox-item">
                        <input type="checkbox" id="commitment5" name="commitment5" value="Acción 5">
                        <label for="commitment5">Acción 5: Excepteur sint occaecat cupidatat non</label>
                    </div>
                    <div class="checkbox-item">
                        <input type="checkbox" id="commitment6" name="commitment6" value="Acción 6">
                        <label for="commitment6">Acción 6: At vero eos et accusamus et iusto odio</label>
                    </div>
                    <div class="checkbox-item">
                        <input type="checkbox" id="commitment7" name="commitment7" value="Acción 7">
                        <label for="commitment7">Acción 7: Et harum quidem rerum facilis est</label>
                    </div>
                    <div class="checkbox-item">
                        <input type="checkbox" id="commitment8" name="commitment8" value="Acción 8">
                        <label for="commitment8">Acción 8: Temporibus autem quibusdam et aut officiis</label>
                    </div>
                    <div class="checkbox-item">
                        <input type="checkbox" id="commitment9" name="commitment9" value="Acción 9">
                        <label for="commitment9">Acción 9: Itaque earum rerum hic tenetur a sapiente</label>
                    </div>
                    <div class="checkbox-item">
                        <input type="checkbox" id="commitment10" name="commitment10" value="Acción 10">
                        <label for="commitment10">Acción 10: Nam libero tempore cum soluta nobis</label>
                    </div>
                </div>

                <div class="form-group">
                    <label for="additional">Compromisos Adicionales (opcional)</label>
                    <textarea id="additional" name="additional" placeholder="Cualquier compromiso adicional que quieras añadir..."></textarea>
                </div>

                <button type="submit" class="submit-btn">Firmar el Compromiso</button>
            </form>
        </div>

        <div class="signatories-section">
            <h2>Firmantes</h2>
            <div id="signatories-list">
                <div class="no-signatories">
                    ¡Sé el primero en firmar este compromiso!
                </div>
            </div>
        </div>
    </div>

    <script>
        // CONFIGURACIÓN: Actualiza esta URL con tu Google Apps Script
        const GOOGLE_SCRIPT_URL = 'GOOGLE_SCRIPT_URL_HERE';

        let signatories = [];

        // Cargar firmas existentes desde Google Sheets
        async function loadSignatories() {
            try {
                console.log('Cargando firmas desde Google Sheets...');
                const response = await fetch(GOOGLE_SCRIPT_URL + '?action=get');

                if (response.ok) {
                    const data = await response.json();
                    signatories = data.signatories || [];
                    console.log('Firmas cargadas:', signatories.length);
                } else {
                    console.error('Error cargando firmas:', response.status);
                    signatories = [];
                }
            } catch (error) {
                console.error('Error:', error);
                signatories = [];
            }
            displaySignatories();
        }

        // Manejador de envío del formulario
        document.getElementById('commitmentForm').addEventListener('submit', function (e) {
            e.preventDefault();

            // Recoger compromisos seleccionados
            const selectedCommitments = [];
            for (let i = 1; i <= 10; i++) {
                const checkbox = document.getElementById(`commitment${i}`);
                if (checkbox && checkbox.checked) {
                    selectedCommitments.push(checkbox.value);
                }
            }

            if (selectedCommitments.length === 0) {
                alert('Por favor selecciona al menos un compromiso para firmar.');
                return;
            }

            // Preparar datos
            const formData = {
                name: document.getElementById('name').value,
                email: document.getElementById('email').value,
                affiliation: document.getElementById('affiliation').value,
                department: document.getElementById('department').value,
                commitments: selectedCommitments.join(', '),
                additional: document.getElementById('additional').value,
                action: 'submit'
            };

            // Mostrar estado de carga
            const submitBtn = document.querySelector('.submit-btn');
            const originalText = submitBtn.textContent;
            submitBtn.textContent = 'Enviando...';
            submitBtn.disabled = true;

            // Enviar a Google Sheets
            fetch(GOOGLE_SCRIPT_URL, {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/x-www-form-urlencoded',
                },
                body: new URLSearchParams(formData)
            })
                .then(response => response.json())
                .then(data => {
                    if (data.success) {
                        alert('¡Gracias por firmar el compromiso! Tu firma ha sido registrada.');
                        this.reset();
                        setTimeout(loadSignatories, 2000);
                    } else {
                        alert('Error: ' + (data.error || 'Error desconocido'));
                    }
                })
                .catch(error => {
                    console.error('Error:', error);
                    alert('Hubo un error al enviar. Por favor inténtalo de nuevo.');
                })
                .finally(() => {
                    submitBtn.textContent = originalText;
                    submitBtn.disabled = false;
                });
        });

        function displaySignatories() {
            const container = document.getElementById('signatories-list');

            if (signatories.length === 0) {
                container.innerHTML = '<div class="no-signatories">¡Sé el primero en firmar este compromiso!</div>';
                return;
            }

            let html = '';
            signatories.forEach(signatory => {
                const departmentText = signatory.department ? ` - ${signatory.department}` : '';
                const additionalText = signatory.additional ? `<div><strong>Compromisos adicionales:</strong> ${signatory.additional}</div>` : '';

                html += `
                    <div class="signatory">
                        <div class="signatory-name">${signatory.name}</div>
                        <div class="signatory-affiliation">${signatory.affiliation}${departmentText}</div>
                        <div class="signatory-commitments">
                            <strong>Compromisos:</strong> ${signatory.commitments.join(', ')}
                        </div>
                        ${additionalText}
                        <div class="signatory-date">Firmado el ${signatory.date}</div>
                    </div>
                `;
            });

            container.innerHTML = html;
        }

        // Cargar firmas cuando se carga la página
        loadSignatories();
    </script>
</body>

</html>